\documentclass[conference]{IEEEtran}
\IEEEoverridecommandlockouts
\usepackage{siunitx}
\sisetup{
	round-mode=places,
	round-precision=3,
	table-number-alignment = center,
}

% --- Codificación y español ---
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[spanish]{babel}

% --- Tipografía y microajustes (reduce overfull hbox) ---
\usepackage{microtype}
\emergencystretch=2em

% --- Gráficos y floats ---
\usepackage{graphicx}
\usepackage{float} % para [H] si lo usas (art/report ok)

% --- Hipervínculos (con soporte unicode) ---
\usepackage[unicode,hidelinks]{hyperref}

% --- Tablas numéricas y redondeo ---
\usepackage{siunitx}
\sisetup{
	round-mode=places,
	round-precision=3,
	table-number-alignment = center,
}

% --- Tablas más flexibles ---
\usepackage{booktabs}
\usepackage{tabularx}

% --- Código: listings con UTF-8 real ---
\usepackage{listings}
\usepackage{listingsutf8}
\lstset{
	inputencoding=utf8,
	extendedchars=true,
	basicstyle=\ttfamily\small,
	breaklines=true, columns=fullflexible, keepspaces=true,
	frame=single, numbers=left, numberstyle=\tiny, xleftmargin=1em,
	% Mapeo por si alguna terminal te mete bytes raros:
	literate=
	{á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'\i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
	{Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
	{ñ}{{\~n}}1 {Ñ}{{\~N}}1
	{¿}{{\textquestiondown}}1 {¡}{{\textexclamdown}}1
}

% The preceding line is only needed to identify funding in the first footnote. If that is unneeded, please comment it out.
\usepackage{cite}
\usepackage[utf8]{inputenc}     % <- Para UTF-8
\usepackage[T1]{fontenc}        % <- Para ñ y tildes correctas
\usepackage[spanish]{babel}     % <- Para idioma español
\usepackage{hyperref}
% ==== SOPORTE UTF-8 Y ESPAÑOL ====
\usepackage[utf8]{inputenc}   % codificación UTF-8
\usepackage[T1]{fontenc}      % mejor manejo de acentos/ñ en PDF
\usepackage[spanish]{babel}   % traducción de entornos automáticos

% ==== PAQUETES EXTRA RELEVANTES ====
\usepackage{graphicx}         % para figuras
\usepackage{float}            % para usar [H] en tablas/figuras
\usepackage{hyperref}         % enlaces y referencias en PDF
\usepackage{caption}          % mejor control de captions

% ==== LISTINGS CON UTF-8 ====
\usepackage{listings}
\usepackage{listingsutf8}
\lstset{
	inputencoding=utf8,         % clave: permite acentos directamente
	extendedchars=true,
	basicstyle=\ttfamily\small, % fuente monoespaciada
	breaklines=true,            % partir líneas largas
	columns=fullflexible,
	keepspaces=true,
	frame=single,               % recuadro alrededor del código
	numbers=left,               % numeración de líneas
	numberstyle=\tiny,
	xleftmargin=1em
}

\usepackage{amsmath,amssymb,amsfonts}
\usepackage{algorithmic}
\usepackage{graphicx}
\usepackage{textcomp}
\usepackage{xcolor}
\usepackage{fancyvrb}
\usepackage{listings}
\lstset{
	basicstyle=\ttfamily\small,
	breaklines=true,
	frame=none,
	columns=fullflexible
}
\usepackage{stfloats}

\def\BibTeX{{\rm B\kern-.05em{\sc i\kern-.025em b}\kern-.08em
		T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}

\usepackage{float}

% Macro para insertar figuras centradas con ancho ajustable
% Ejemplo de uso \insertarfigura{ruta}{leyenda}{etiqueta}{escala entre 0 y 1}
\newcommand{\insertarfigura}[4]{
	\begin{figure}[H]
		\centerline{\includegraphics[width=#4\linewidth]{#1}}
		\caption{#2}
		\label{#3}
	\end{figure}
	% Referencia cruzada si se desea en el texto: véase la Fig.~\ref{#4}
}
% Macro: \insertarfigurawide{ruta}{caption}{label}{scale}
\usepackage{cuted} % en el preámbulo

% 
\newcommand{\insertarfigurawide}[4]{%
	\begin{figure*}[ht]
		\centering
		\includegraphics[width=#4\textwidth]{#1}
		\caption{#2}
		\label{#3}
	\end{figure*}
}

\usepackage{subcaption} % en el preámbulo


% --- Configuración para código Matlab ---

% Para listings en 2 columnas sin desbordar
\lstset{
	linewidth=\columnwidth,     % fuerza el ancho a la columna
	xleftmargin=0pt,            % sin margen extra
	framexleftmargin=0pt,
	captionpos=b,               % leyenda abajo (recomendado en IEEE)
}

\lstdefinelanguage{Matlab}{
	morekeywords={break,case,catch,continue,else,elseif,end,for,function,
		global,if,otherwise,persistent,return,switch,try,while},
	sensitive=true,
	morecomment=[l]\%,
	morestring=[m]',
}
\lstdefinestyle{matlabstyle}{
	language=Matlab,
	basicstyle=\ttfamily\small,
	keywordstyle=\color{blue}\bfseries,
	commentstyle=\color{green!40!black}\itshape,
	stringstyle=\color{red!60!black},
	numbers=left,
	numberstyle=\tiny,
	stepnumber=1,
	numbersep=6pt,
	breaklines=true,
	showstringspaces=false,
	frame=single,
	rulecolor=\color{black!20}
}


\begin{document}
	\input{carat.tex}
	\input{introduccion.tex}
	\input{desarrollo.tex}
	\input{resultados.tex}
\end{document}